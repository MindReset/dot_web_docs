---
title: 列出设备内容
description: 通过 API 获取设备当前的内容列表。
new: true
---

import Link from 'fumadocs-core/link';
import { ApiPlayground } from 'src/shadcn/components/api-playground';
import { TypeTable } from 'src/shadcn/components/type-table';

## 快速指引

### 必要条件

1. 确保您已在 Dot. App 中<Link href="/docs/service/studio/api/get_api">获取并保存了 API 密钥</Link>；
2. 确保您至少有一台所属于自己的设备并已<Link href="/docs/service/studio/api/get_device_id">获取设备序列号</Link>；

<Callout
	type="info"
	title="API 的请求限制为每秒 10 次，通过 API 请求，您可以更灵活地控制设备的行为和响应。"
/>

<Callout
	type="info"
	title="文档中的 ‘{{变量}}’ 花括号表示需要替换的变量，请根据实际情况进行替换，并移除‘{{}}’。"
/>

### 请求示例

<ApiPlayground
	baseUrl="https://dot.mindreset.tech"
	endpoint="/api/authV2/open/device/:deviceId/:taskType/list"
	method="GET"
	pathParams={{
		deviceId: {
			type: 'string',
			required: true,
			name: '设备序列号',
		},
		taskType: {
			type: 'select',
			required: true,
			name: '内容类型',
			default: 'loop',
			options: [
				{ value: 'loop', label: '循环内容' },
				{ value: 'fixed', label: '固定内容' },
			],
		},
	}}
	auth={true}
	defaultOpen={false}
/>

### 响应示例

```json
[
	{
		"type": "TEXT_API",
		"key": "text_task_1",
		"refreshNow": true,
		"title": "Hello",
		"message": "World"
	},
	{
		"type": "IMAGE_API",
		"key": "image_task_1",
		"refreshNow": true,
		"border": 0,
		"ditherType": "DIFFUSION",
		"ditherKernel": "FLOYD_STEINBERG"
	}
]
```

## 问题排查

### 请求路径

`/api/authV2/open/device/:deviceId/:taskType/list`

### 请求方法

`GET`

### 路径参数

<TypeTable
	type={{
		deviceId: {
			description: '设备序列号',
			type: 'string',
			required: true,
		},
		taskType: {
			description: '内容类型',
			type: 'string',
			required: true,
		},
	}}
/>

### 请求结构

此接口不需要请求体，仅需在请求头中提供 API 密钥。

- `deviceId`: 设备序列号
- `taskType`: 内容类型，例如 `loop`（循环内容）

### 响应结构

返回值为内容数组。

- `type`: 内容类型（返回 `TEXT_API` / `IMAGE_API` / `GENERAL`）
- `key`: 内容唯一标识（可能为 `null`）
- 其余字段：该内容的输入参数（不同类型的内容字段不同，例如 Text API 的 `title` / `message`，Image API 的 `border` / `ditherType` 等）

<TypeTable
	type={{
		'[]': {
			description: '设备内容数组',
			type: 'array',
			required: true,
			items: {
				type: {
					description: '内容类型（`TEXT_API` / `IMAGE_API` / `GENERAL`）',
					type: "'TEXT_API' | 'IMAGE_API' | 'GENERAL'",
					required: true,
				},
				key: {
					description: '内容唯一标识（可用于 Text/Image API 的 taskKey 参数）',
					type: 'string | null',
					required: true,
				},
				refreshNow: {
					description: '是否立刻显示内容（可能存在）',
					type: 'boolean',
				},
				title: {
					description: '标题（Text API 可能存在）',
					type: 'string',
				},
				message: {
					description: '内容（Text API 可能存在）',
					type: 'string',
				},
				signature: {
					description: '签名（Text API 可能存在）',
					type: 'string',
				},
				icon: {
					description: '图标（Text API 可能存在）',
					type: 'string',
				},
				link: {
					description: '碰一碰跳转链接（可能存在）',
					type: 'string',
				},
				image: {
					description: '图像数据（Image API 可能存在）',
					type: 'string',
				},
				border: {
					description: '边框颜色（Image API 可能存在）',
					type: '0 | 1',
				},
				ditherType: {
					description: '抖动类型（Image API 可能存在）',
					type: 'string',
				},
				ditherKernel: {
					description: '抖动算法（Image API 可能存在）',
					type: 'string',
				},
			},
		},
	}}
/>

### 响应说明

| code  | 含义       | 描述                 |
| ----- | ---------- | -------------------- |
| `200` | 成功       | 成功获取设备内容列表 |
| `401` | 未授权     | API 密钥无效或已过期 |
| `500` | 服务器错误 | 服务器内部错误       |
