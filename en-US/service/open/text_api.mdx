---
title: Control Text Content
---

import Link from 'fumadocs-core/link';
import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { ApiPlayground } from 'src/shadcn/components/api-playground';
import { TypeTable } from 'src/shadcn/components/type-table';

<Callout type="warning" title="API Migration Notice">
	The legacy endpoint `https://dot.mindreset.tech/api/open/text` will be retired soon.
	To reduce migration effort, requests sent to the legacy endpoint will be automatically forwarded
	to the new API, but this compatibility behavior may be removed in the future.

    We strongly recommend completing the following updates as soon as possible:
    - Update the request URL to the new endpoint: `/api/authV2/open/device/:deviceId/text`
    - Send parameters according to this document (e.g. `refreshNow` / `title` / `message` / `signature` / `icon` / `link` / `taskKey`)
    - If you rely on legacy response payloads or error codes, adapt your integration to the new API responses

</Callout>

## Quick Guide

### Prerequisites

1. Make sure you have <Link href="/docs/service/studio/api/get_api">retrieved and saved your API key</Link> in the Dot. App;
2. Make sure you own at least one device and have <Link href="/docs/service/studio/api/get_device_id">obtained its device serial number</Link>;
3. Make sure your device is connected to power;
4. Make sure your device is connected to the network;
5. Make sure the device has added the Text API content.

<Callout
	type="info"
	title="The API rate limit is 10 requests per second. With the API, you can control device behavior and responses more flexibly."
/>

<Callout
	type="info"
	title="Placeholders wrapped in ‘{{variable}}’ indicate values you must replace. Fill them with your actual values and remove the ‘{{}}’ braces."
/>

### Request Examples

<ApiPlayground
	baseUrl="https://dot.mindreset.tech"
	endpoint="/api/authV2/open/device/:deviceId/text"
	method="POST"
	pathParams={{
		deviceId: {
			type: 'string',
			required: true,
			name: 'Device serial number',
		},
	}}
	bodyParams={{
		refreshNow: {
			type: 'boolean',
			name: 'Show immediately',
			default: true,
		},
		taskKey: {
			type: 'string',
			name: 'Task identifier',
			description:
				"Retrieve it via the 'List Device Tasks' API (used to target a specific Text API content when multiple exist).",
		},
		title: {
			type: 'string',
			name: 'Title',
		},
		message: {
			type: 'string',
			name: 'Message',
		},
		signature: {
			type: 'string',
			name: 'Signature',
		},
		icon: {
			type: 'string',
			name: 'Base64-encoded PNG icon data',
		},
		link: {
			type: 'string',
			name: 'NFC tap redirect link',
		},
	}}
	auth={true}
	defaultOpen={false}
/>

### Response Example

```json
{
	"code": 200,
	"message": "Device Text API content switched",
	"result": {
		"message": "Device ABCD1234ABCD Text API content switched"
	}
}
```

## Reference Usage

1. Simple text without immediate display

<CustomCloudImage osSrc="dot/docs/1_1754308279592.png" alt="Actual effect" />

<Tabs items={['cURL']}>
  <Tab value="cURL">
    ```bash
    curl -X POST \
		  https://dot.mindreset.tech/api/authV2/open/device/{{deviceId}}/text \
      -H 'Authorization: Bearer dot_app_UlSpzXNEXhYZIAFakHLCkMVVBLbsBIWxaRMVaJZGUOYKhDoDRZwLLvLujAIwQxbY' \
      -H 'Content-Type: application/json' \
      -d '{
        "refreshNow": false,
        "title": "evnydd0sf",
        "message": "我能吞下玻璃而不伤身体"
      }'
    ```
  </Tab>
</Tabs>

2. Complex text and display immediately

<CustomCloudImage osSrc="dot/docs/2_1754308783977.png" alt="Actual effect" />

<Tabs items={['cURL']}>
  <Tab value="cURL">
    ```bash
    curl -X POST \
		  https://dot.mindreset.tech/api/authV2/open/device/{{deviceId}}/text \
      -H 'Authorization: Bearer dot_app_UlSpzXNEXhYZIAFakHLCkMVVBLbsBIWxaRMVaJZGUOYKhDoDRZwLLvLujAIwQxbY' \
      -H 'Content-Type: application/json' \
      -d '{
        "title": "验证码小助手",
        "message": "一个来自「少数派」的验证码\n205112",
        "signature": "2025年8月4日 19:58"
      }'
    ```
  </Tab>
</Tabs>

3. Complex text with icon and link, display immediately

<CustomCloudImage osSrc="dot/docs/3_1754310143662.png" alt="Actual effect" />

<Tabs items={['cURL']}>
  <Tab value="cURL">
    ```bash
    curl -X POST \
		  https://dot.mindreset.tech/api/authV2/open/device/{{deviceId}}/text \
      -H 'Authorization: Bearer dot_app_UlSpzXNEXhYZIAFakHLCkMVVBLbsBIWxaRMVaJZGUOYKhDoDRZwLLvLujAIwQxbY' \
      -H 'Content-Type: application/json' \
      -d '{
        "title": "每日健康",
        "message": "消耗卡路里：702千卡\n今日步数：4183步\n站立时间：62分钟",
        "signature": "2025年8月4日 20:16",
        "icon": "{{base64-encoded PNG image data}}",
        "link": "x-apple-health://"
      }'
    ```
  </Tab>
</Tabs>

4. Highly customized text or graphics

<Link href="/docs/service/studio/api/image_api#%E5%8F%82%E8%80%83%E4%BD%BF%E7%94%A8">
	Refer to the Image API section on text-as-image usage
</Link>

<CustomCloudImage osSrc="dot/docs/%E9%98%B4%E5%BD%B13_1754130631116.png" alt="Actual effect" />

## Troubleshooting

### Endpoint

`/api/authV2/open/device/:deviceId/text`

### Method

`POST`

### Request Schema

<TypeTable
	type={{
		refreshNow: {
			description: 'Whether to display the content immediately (Control display timing)',
			type: 'bool',
			default: 'true',
		},
		title: {
			description: 'Text title (Title shown on screen)',
			type: 'string',
		},
		message: {
			description: 'Text content (Content shown on screen)',
			type: 'string',
		},
		signature: {
			description: 'Text signature (Signature shown on screen)',
			type: 'string',
		},
		icon: {
			description: 'Base64-encoded PNG icon data (40px×40px) (Icon shown at bottom-left)',
			type: 'string',
		},
		link: {
			description: 'http/https link or URL scheme (NFC tap redirect target)',
			type: 'string',
		},
		taskKey: {
			description:
				"When multiple Text API contents exist on the device, use this taskKey to specify which content to update and switch. You can retrieve it via the 'List Device Tasks' API. If omitted, the first Text API content is used.",
			type: 'string',
		},
	}}
/>

### Response Schema

<TypeTable
	type={{
		code: {
			description: 'Status code',
			type: 'number',
			required: true,
		},
		message: {
			description: 'Message',
			type: 'string',
			required: true,
		},
	}}
/>

### Status Codes

| code  | Meaning                 | Description                                                       |
| :---- | :---------------------- | :---------------------------------------------------------------- |
| `200` | Success                 | Text API content switched / Data updated but content not switched |
| `400` | Invalid parameters      | Invalid icon format                                               |
| `403` | Forbidden               | You do not have permission to operate this device                 |
| `404` | Not found               | Device not found or not registered<br/>Text API content not added |
| `500` | Device response failure | Failed to switch Text API content                                 |
